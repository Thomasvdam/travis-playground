language: node_js
node_js:
- node
before_install: npm i -g npm@latest;
install:
- npm install
script:
- npm run lint
- npm run test
- npm run build
- npm run dist
after_deploy:
- sh ./update-release.sh
deploy:
  provider: npm
  email: t.vandam@wearetriple.com
  api_key:
    secure: HZZRasmfaMDdz675sp3j4YXwoYXgkwGiO6OwO8x7trQTwpW7sz5CTpoy2LlmQUrF1zAazIRw2FwdXlAeqwskK5vEO/WZMltQ+6iUxDdj4jYQamByHuT98bVL7F40Ou8hu32FEaafQOKdABHyfWKQtbRvGDcCdTp86UFIUDiDim37vgHMVMQ1Ct8YMiZ2HerYSH3aOorFRIfxglF+NBLnkx+GqiF3VHOhbuNZDzZsl4+NquIpqVlXzCzCQsZ7af7YNgVoX5Kqg9Qj/xM5Bh9rLigdDBiXXpLroIbt/aHdT+/Gc94zCIrBC+6zrBNYRooyAaThpkMOENly9fb1wx2aI4e7U8qFM4GUO9fCYnyDP/w0yD52UesWGkomZU9Y+iWzruMpKWdy89cBiDRVC/OmR2P30Ad4vtl/mSPNwpBQoGsnGpsyv5gniSpkxcxl7V+Klg1VZ9Uh2Vs1tkfmCZh7D3kXQa+eb7Y/R+Jb0Wmrx6mo2kAIlDAL4Ic1Dx0dVU/yXCwCktiztmBR/M/qaEPKzL24HO6gwAsmgp2T7JbCyDcXfn9zBr9xmR8y9iap6/mWcW/CyuMakkK/gYCdKQaEQmGahs1grrzXikyw8zpZqFwDgrWCBSiEZULnlahe2QTmGIjUWiH+Rpv/GhOStOp1bVcxF7mtu2RRCJc+0F5rwM0=
  skip_cleanup: true
  on:
    tags: true
env:
  global:
  - secure: 04Boq7mBHQB2Qq3Y7GuLgsPQZ8rC3wyGL8wA1lGbbbcLyO3b88dC4iDui/mPyksj0nGeFwr3OAZDtH+If69HVo88fDlrLzOw3L7XnRHVzA739fECtOQQgK5ykOqmKAGTO79Heo3/F7gtXeWM2m92S6tqnvQFeWubhrEHy/bA1iDcEj0S3+ov6htSife9kRwqlLffviuzLiIFHUTo1jAtImr+z10m1fcMC8YrXgCO7UU5sBRoKBjAb0P5CdpI6dozfQhniEmvm7TItNw5bqpX9RhjvrKD/arOu9eubR997BFUsMe3kaD5qT1oZLPKFYQpVfZL5XBCum9uAvBZZ7MbfwEVxKyOso22WwvMUKmNBVgovP5PXfT7r2COQAiX9rD02ihXky4yMbskb5VfAJqsaypd2hRDtC3WRzLDDpVXX/WEz+zSNz7R3x4Prr+8SQywFZzi4QHQLTVOwafYPVgaDI51GWTmt3spn2sFBMIyKm4w2zAjKQHp9DLPbIEUUp/2xCSK6GIpqt0yyhEEXn5qjyUuqkPiI9/wBSwEeM8hj2rbAtHALWGdji62E2in42PegqHVsVkvHHRtssvPmcI4KXFRPEKYYpwfsWLAJC2zk/lMOp6IqD9lQ2yXtwxo2mNlRy/AxFSRDN2eb3f5PuIKBMDZ/zAMOuSvDiiyW1s7BxU=
  - secure: VNLR4vOkwQwyHGumkFqetozXhRaXIQoHmq2pHpU7MY+PyJ1XBqNYEr3gf/U/pMooJ+iYIqtQcNYvEY3FH/w95GYS/82jLhg6wSf7xx4FNKL8Uh5Bx5RduY6vgnwjeKTkhdrU0GyanhcsEiRFGvfbZ2VPBBhfui2YJDjTERufDe95yaHWj1MpNKosmgUHzkJNfyjTiFoBaEr1eKgAQh/9FKrxYpJahpqdblI8CXQRXAiyc96JavsuoFAchZPpft/SF7sHn08tzqJdIU0/4Qmg6fR4emIC0X7e3ErALaT1L8BWhOI5aL2BbiLEEsOZnmDQ8IzVSjsRvVcZqJ4nFM47z+gTe4neDEPW38GpQcES4ir52fpFm6mwA6nSIqWoFI3nr+dZ0oqctVIJmk9gTl8rW/DOiobq9OQdudmZJWUuDE2DQA/vFhjdp2bRvEN2WXVxcXIDTI/CSiExv5VVbM5JctFVta4cUL9DB6hAueQpUgd53Pmrsw2sN0LHSNqy4tZTuDHmA/uNd/MR9iBhuTtD4+zNlQ6Omn/dtyRH12/lyiZOPVJOKxx2UN0mCm/mpiVGD6LQ8ARz9dMenuj5S36Tims+/YOn9zLqwjlb7mjugwA3AE5Xo+YkqWwy8Qc5wmWTxe+T8Z9a2MzGGFpt8wjlDbIE5BePO2sX7RFbP7mZNjo=
notifications:
  slack:
    rooms:
      secure: hKJuLa8ZhLpWcMO4jBf4Ik8+kffM+eFzJFEgswKoS/jyLx5XiJJKhS4/4gFtRYb8bihrAJ0ekHiH17RoE1YoxQSKISbzN8Qp83JOAHysnBC2VxfV6kAGxlP4yHD2fOF9c6UfAKsqD5ZkhafSh+6gd72Qzf7E3zIQEoFZDnNLaWiY/Fr+UQNwbosoyIScGliZHD75AFXWvoBQYAZgo5fym6A5KilaZnN9YKzN1sLnvH7oe9EraMQ4LXwHVhBUNtwm7jezgavrZ8/NQFQBysVDkB0vEfkBxNgRQ5YObLQl8LJHjv6Akw56/uBb827n5Cmc64kXQrHI1+hS4J6LFwYOIeCWwi/UU8VbTL7R2lETitqO+fmZJHiR5CWE2rbqGF4YXBx6X2/miqdeEkLqxlbgdIep2yXbrP81ZBVFQU2pu0XY/4cr7GaQ1DaRoqs7zZsUzpkEb2LtW3S2751XqH7RdJErdwQt2myK2Idz19MKhEwF8DZf9M/RfkWUicOHzYz4nfFbWB04mTGxv7evy5iWli+7HqckjNESi9e6v2ojOcfcAylG8Hoa2oY0M5nKAWCXC4IkWtWmacI7Ugb6e3hUnCqsOa41UlvBJbRZBUs1FP8PnzB4rVWhJsnVdejCXx7VcEpeVF3+jqXzIMI3zzjjttucctWIcBmIIzgFh/LxEEI=
    on_success: always
    on_failure: always
    template: |-
      Build <%{build_url}|#%{build_number}> (<%{compare_url}|%{commit}>) of %{repository_name}@%{branch} by %{author}
      %{result} in %{duration}
      %{commit_subject}
